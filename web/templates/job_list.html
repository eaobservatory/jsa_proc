{% extends "layout.html" %}
{% set active_page="job" %}

{% block body %}
{{render_navbar(active_page)}}
<form>
    <p>
        <select name="location">
            <option value="" {{ 'selected="selected"' if selected_location is none }}>Any location</option>
            {% for location in locations %}
                <option value="{{ location }}" {{ 'selected="selected"' if location == selected_location }}>{{ location }}</option>
            {% endfor %}
        </select>
        <select name="state">
            <option value="" {{ 'selected="selected"' if selected_state is none }}>Any state</option>
            {% for state in states %}
                <option value="{{ state }}" {{ 'selected="selected"' if state == selected_state }}>{{ state | state_name }}</option>
            {% endfor %}
        </select>
        <select name="number">
          <option value="" {{'selected="selected"' if selected_number is none}}>All</option>
          {% for number in [25,50,75,100] %}
          <option value="{{ number }}" {{ 'selected="selected"' if number == selected_number }}>{{ number }}</option>
          {% endfor %}
        </select>
        <input type="submit" value="Filter" />
    </p>
</form>

{% for job in jobs %}
<div class="tile{% if job.state is state_active %} state_active{% endif %}">
    <div class="tile_title state_{{ job.state | state_phase }}">
        <a href="{{ job.url }}" title="{{ job.tag }}">
            {{ job.state | state_name }}
        </a>
    </div>
    <p>
        <a href="{{ job.url }}" title="{{ job.tag }}">
            {{ job.id }}
            <br />
            {{ job.location }}

            {% if job.preview is not none %}
            <br />
            <img src="{{ job.preview }}" width="64" height="64" />
            {% endif %}
        </a>
    </p>
</div>
{% endfor %}

<div>
{% if selected_number is not none %}
{% if selected_page|int > 0 %}
<a href="{{url_for('job_list', page=selected_page|int-1, number=selected_number)}}"> Page Prev</a>
{% endif %}
{% if jobs|length == selected_number|int %}
<a href="{{url_for('job_list', page=selected_page|int+1, number=selected_number)}}"> Page Next</a>
{% endif %}
</div>
{% endif %}
{% endblock %}
